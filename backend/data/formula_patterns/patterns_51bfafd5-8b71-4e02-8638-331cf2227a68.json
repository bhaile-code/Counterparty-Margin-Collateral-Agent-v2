{
  "document_id": "51bfafd5-8b71-4e02-8638-331cf2227a68",
  "extraction_timestamp": "2025-11-10T16:59:31.441380",
  "patterns": {
    "delivery_amount": {
      "pattern_name": "delivery_amount",
      "pattern_type": "greatest_of",
      "components": [
        "Moody's CSA calculation (with two trigger event levels)",
        "S&P CSA calculation (with two ratings downgrade levels)"
      ],
      "clause_text": "The \"Delivery Amount\" applicable to the Pledgor for any Valuation Date will equal the greatest of: (1) the amount by which the Moody's Credit Support Amount exceeds the Value (determined using the Moody's Valuation Percentages) as of that Valuation Date of the Posted Credit Support held by the Secured Party; and (2) the amount by which the S&P Credit Support Amount exceeds the S&P Value as of that Valuation Date of the Posted Credit Support held by the Secured Party; and if, on any Valuation Date, the Delivery Amount equals or exceeds the Pledgor's Minimum Transfer Amount, the Pledgor will transfer to the Secured Party sufficient Eligible Credit Support to ensure that, immediately following such transfer, the Delivery Amount shall be zero.",
      "source_page": 4,
      "confidence": 0.92,
      "variations_detected": [
        "Dual-tier trigger structure for each rating agency (two levels per agency rather than single threshold)",
        "Asymmetric naming convention: Moody's uses 'Trigger Event' terminology while S&P uses 'Ratings Downgrade' terminology",
        "Both Party A and Party B have 0.0 thresholds, suggesting full collateralization under trigger conditions"
      ],
      "reasoning": "The presence of 4 valuation columns representing two distinct rating agencies (Moody's and S&P), each with two trigger/downgrade levels, strongly indicates a 'greatest_of' pattern. This structure is typical of CSAs where the Delivery Amount is calculated as the maximum exposure across multiple rating agency scenarios. Each agency has escalating collateral requirements (First/Second Trigger for Moody's, Approved/Required Downgrade for S&P), and the final Delivery Amount would be the greatest of these calculated values."
    },
    "return_amount": {
      "pattern_name": "return_amount",
      "pattern_type": "greatest_of",
      "components": [
        "Moody's CSA calculation (with two trigger event levels)",
        "S&P CSA calculation (with two ratings downgrade levels)"
      ],
      "clause_text": "The \"Return Amount\" applicable to the Secured Party for any Valuation Date will equal the least of: (1) the amount by which the Value (determined using the Moody's Valuation Percentages) as of that Valuation Date of the Posted Credit Support held by the Secured Party exceeds the Moody's Credit Support Amount for such Valuation Date; and (2) the amount by which (a) the S&P Value as of that Valuation Date of the Posted Credit Support held by the Secured Party exceeds the S&P Credit Support Amount for such Valuation Date. In no event shall the Secured Party be required to transfer any Posted Credit Support under Paragraph 3(b) if, immediately following such transfer, the Delivery Amount would be greater than zero.",
      "source_page": 4,
      "confidence": 0.9,
      "variations_detected": [],
      "reasoning": "Return Amount pattern inferred from Delivery Amount structure"
    }
  },
  "threshold_structure": {
    "structure_type": "variable_by_rating",
    "party_a_base": 0.0,
    "party_b_base": 0.0,
    "triggers": {
      "rating_agencies": [
        "Moody's First Trigger Event",
        "Moody's Second Trigger Event",
        "S&P Approved Ratings Downgrade",
        "S&P Required Ratings Downgrade"
      ],
      "trigger_events": "Rating-dependent threshold adjustments may apply"
    },
    "source_clause": "Party A Threshold: Infinity; provided that for (a) so long as the Moody's First Rating Trigger Requirements apply and either (i) the Moody's First Rating Trigger Requirements have applied since this Annex was executed or (ii) at least 30 Local Business Days have elapsed since the last time the Moody's First Rating Trigger Requirements did not apply, the Threshold shall be zero; or (b) so long as an S&P Approved Ratings Downgrade has occurred and has been continuing for at least 10 Local Business Days or since this Credit Support Annex was executed, the Threshold shall be zero; or (c) so long as an S&P Required Ratings Downgrade has occurred and has been continuing for at least 10 Local Business Days or since this Credit Support Annex was executed, the Threshold shall be zero.; Party B Threshold: Not Applicable",
    "source_page": 4,
    "confidence": 0.95
  },
  "haircut_structure": {
    "dependency_type": "rating_dependent",
    "table_reference": "Eligible Collateral Schedule",
    "source_page": 0,
    "varies_by": [
      "rating_scenario",
      "collateral_type"
    ],
    "confidence": 0.95,
    "rating_scenarios": [
      "Moody's First Trigger Event",
      "Moody's Second Trigger Event",
      "S&P Approved Ratings Downgrade",
      "S&P Required Ratings Downgrade"
    ]
  },
  "independent_amount": {
    "has_independent_amount": false,
    "party_a_amount": null,
    "party_b_amount": null,
    "source_page": 0
  },
  "mta_rules": {
    "party_a_mta": 50000.0,
    "party_b_mta": 50000.0,
    "structure_type": "fixed",
    "source_page": 4
  },
  "rounding_rules": {
    "rounding_method": "up",
    "rounding_increment": 10000.0,
    "applies_to": [
      "delivery_amount"
    ],
    "source_page": 4
  },
  "complexity_score": 0.8500000000000001,
  "overall_confidence": 0.9339999999999999,
  "agent_reasoning": [
    {
      "step_number": 1,
      "step_name": "extract_delivery_amount_pattern",
      "input": {
        "column_info": {
          "valuation_column_count": 4,
          "valuation_column_names": [
            "Moody's First Trigger Event",
            "Moody's Second Trigger Event",
            "S&P Approved Ratings Downgrade",
            "S&P Required Ratings Downgrade"
          ]
        },
        "csa_terms": "CSATerms object"
      },
      "output": {
        "pattern_name": "delivery_amount",
        "pattern_type": "greatest_of",
        "components": [
          "Moody's CSA calculation (with two trigger event levels)",
          "S&P CSA calculation (with two ratings downgrade levels)"
        ],
        "clause_text": "The \"Delivery Amount\" applicable to the Pledgor for any Valuation Date will equal the greatest of: (1) the amount by which the Moody's Credit Support Amount exceeds the Value (determined using the Moody's Valuation Percentages) as of that Valuation Date of the Posted Credit Support held by the Secured Party; and (2) the amount by which the S&P Credit Support Amount exceeds the S&P Value as of that Valuation Date of the Posted Credit Support held by the Secured Party; and if, on any Valuation Date, the Delivery Amount equals or exceeds the Pledgor's Minimum Transfer Amount, the Pledgor will transfer to the Secured Party sufficient Eligible Credit Support to ensure that, immediately following such transfer, the Delivery Amount shall be zero.",
        "source_page": 4,
        "confidence": 0.92,
        "variations_detected": [
          "Dual-tier trigger structure for each rating agency (two levels per agency rather than single threshold)",
          "Asymmetric naming convention: Moody's uses 'Trigger Event' terminology while S&P uses 'Ratings Downgrade' terminology",
          "Both Party A and Party B have 0.0 thresholds, suggesting full collateralization under trigger conditions"
        ],
        "reasoning": "The presence of 4 valuation columns representing two distinct rating agencies (Moody's and S&P), each with two trigger/downgrade levels, strongly indicates a 'greatest_of' pattern. This structure is typical of CSAs where the Delivery Amount is calculated as the maximum exposure across multiple rating agency scenarios. Each agency has escalating collateral requirements (First/Second Trigger for Moody's, Approved/Required Downgrade for S&P), and the final Delivery Amount would be the greatest of these calculated values."
      },
      "model_used": "claude-sonnet-4-5-20250929",
      "reasoning": "Analyzed rating columns and CSA structure to identify delivery amount pattern type: greatest_of",
      "confidence": 0.92,
      "duration_seconds": 8.101531505584717
    },
    {
      "step_number": 2,
      "step_name": "extract_return_amount_pattern",
      "input": {
        "delivery_pattern_type": "greatest_of"
      },
      "output": {
        "pattern_name": "return_amount",
        "pattern_type": "greatest_of",
        "components": [
          "Moody's CSA calculation (with two trigger event levels)",
          "S&P CSA calculation (with two ratings downgrade levels)"
        ],
        "clause_text": "The \"Return Amount\" applicable to the Secured Party for any Valuation Date will equal the least of: (1) the amount by which the Value (determined using the Moody's Valuation Percentages) as of that Valuation Date of the Posted Credit Support held by the Secured Party exceeds the Moody's Credit Support Amount for such Valuation Date; and (2) the amount by which (a) the S&P Value as of that Valuation Date of the Posted Credit Support held by the Secured Party exceeds the S&P Credit Support Amount for such Valuation Date. In no event shall the Secured Party be required to transfer any Posted Credit Support under Paragraph 3(b) if, immediately following such transfer, the Delivery Amount would be greater than zero.",
        "source_page": 4,
        "confidence": 0.9,
        "variations_detected": [],
        "reasoning": "Return Amount pattern inferred from Delivery Amount structure"
      },
      "model_used": "rule-based",
      "reasoning": "Inferred return amount pattern based on delivery pattern: greatest_of",
      "confidence": 0.9,
      "duration_seconds": 1.2636184692382812e-05
    },
    {
      "step_number": 3,
      "step_name": "analyze_threshold_structure",
      "input": {
        "party_a_threshold": "0.0",
        "party_b_threshold": "0.0"
      },
      "output": {
        "structure_type": "variable_by_rating",
        "party_a_base": 0.0,
        "party_b_base": 0.0,
        "triggers": {
          "rating_agencies": [
            "Moody's First Trigger Event",
            "Moody's Second Trigger Event",
            "S&P Approved Ratings Downgrade",
            "S&P Required Ratings Downgrade"
          ],
          "trigger_events": "Rating-dependent threshold adjustments may apply"
        },
        "source_clause": "Party A Threshold: Infinity; provided that for (a) so long as the Moody's First Rating Trigger Requirements apply and either (i) the Moody's First Rating Trigger Requirements have applied since this Annex was executed or (ii) at least 30 Local Business Days have elapsed since the last time the Moody's First Rating Trigger Requirements did not apply, the Threshold shall be zero; or (b) so long as an S&P Approved Ratings Downgrade has occurred and has been continuing for at least 10 Local Business Days or since this Credit Support Annex was executed, the Threshold shall be zero; or (c) so long as an S&P Required Ratings Downgrade has occurred and has been continuing for at least 10 Local Business Days or since this Credit Support Annex was executed, the Threshold shall be zero.; Party B Threshold: Not Applicable",
        "source_page": 4,
        "confidence": 0.95
      },
      "model_used": "rule-based",
      "reasoning": "Analyzed threshold values and identified structure type: variable_by_rating",
      "confidence": 0.95,
      "duration_seconds": 2.2649765014648438e-05
    },
    {
      "step_number": 4,
      "step_name": "analyze_haircut_structure",
      "input": {
        "column_count": 4
      },
      "output": {
        "dependency_type": "rating_dependent",
        "table_reference": "Eligible Collateral Schedule",
        "source_page": 0,
        "varies_by": [
          "rating_scenario",
          "collateral_type"
        ],
        "confidence": 0.95,
        "rating_scenarios": [
          "Moody's First Trigger Event",
          "Moody's Second Trigger Event",
          "S&P Approved Ratings Downgrade",
          "S&P Required Ratings Downgrade"
        ]
      },
      "model_used": "claude-sonnet-4-5-20250929",
      "reasoning": "Analyzed collateral haircut dependencies: rating_dependent",
      "confidence": 0.95,
      "duration_seconds": 9.07331132888794
    },
    {
      "step_number": 5,
      "step_name": "extract_additional_rules",
      "input": {
        "fields": [
          "mta",
          "rounding",
          "independent_amount"
        ]
      },
      "output": {
        "mta": {
          "party_a_mta": 50000.0,
          "party_b_mta": 50000.0,
          "structure_type": "fixed",
          "source_page": 4
        },
        "rounding": {
          "rounding_method": "up",
          "rounding_increment": 10000.0,
          "applies_to": [
            "delivery_amount"
          ],
          "source_page": 4
        }
      },
      "model_used": "rule-based",
      "reasoning": "Extracted MTA, rounding, and independent amount rules from CSA terms",
      "confidence": 0.95,
      "duration_seconds": 4.076957702636719e-05
    }
  ],
  "variations_summary": [
    "Non-standard threshold structure: variable_by_rating",
    "Both Party A and Party B have 0.0 thresholds, suggesting full collateralization under trigger conditions",
    "Asymmetric naming convention: Moody's uses 'Trigger Event' terminology while S&P uses 'Ratings Downgrade' terminology",
    "Dual-tier trigger structure for each rating agency (two levels per agency rather than single threshold)"
  ]
}